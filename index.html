<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BMW Sales Analysis Dashboard</title>

  <!-- Geist font -->
  <link href="https://fonts.googleapis.com/css2?family=Geist:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Geist', sans-serif;
      background: #0d0d1a;
      color: #f0f0f0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    header, footer {
      width: 100%;
      padding: 1.2rem;
      text-align: center;
      font-weight: 600;
      font-size: 1.8rem;
      color: #fff;
      background: linear-gradient(135deg, #1a1a2e, #0f3460, #533483);
    }

    footer {
      font-size: 1rem;
    }

    .dashboard {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 20px;
      padding: 2rem;
      width: 95%;
      max-width: 1400px;
    }

    .card {
      background: rgba(25, 25, 40, 0.9);
      border-radius: 20px;
      padding: 1rem;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6);
    }

    .card h2 {
      font-size: 1.2rem;
      margin-bottom: 0.8rem;
      text-align: center;
      color: #e0e0ff;
    }

    canvas {
      width: 100% !important;
      height: 300px !important;
    }

    .filters {
      margin: 1rem 0;
      text-align: center;
    }

    select {
      padding: 0.5rem;
      border-radius: 8px;
      border: none;
      background: #1f1f2e;
      color: #fff;
      font-weight: 500;
      outline: none;
    }

    @media (max-width: 768px) {
      header { font-size: 1.5rem; }
      .card h2 { font-size: 1rem; }
      canvas { height: 250px !important; }
    }
  </style>
</head>
<body>

  <header>
    BMW Sales Analysis Dashboard
  </header>

  <div class="filters">
    <label for="yearFilter">Filter by Year:</label>
    <select id="yearFilter"></select>
  </div>

  <div class="dashboard">
    <div class="card">
      <h2>Sales Trend (Yearly)</h2>
      <canvas id="salesTrend"></canvas>
    </div>

    <div class="card">
      <h2>Sales by Region</h2>
      <canvas id="regionDonut"></canvas>
    </div>

    <div class="card">
      <h2>Sales by Color</h2>
      <canvas id="colorDonut"></canvas>
    </div>

    <div class="card">
      <h2>Sales by Engine Size</h2>
      <canvas id="engineBar"></canvas>
    </div>

    <div class="card">
      <h2>Sales by Fuel Type</h2>
      <canvas id="fuelPie"></canvas>
    </div>

    <div class="card">
      <h2>Sales by Transmission</h2>
      <canvas id="transmissionPie"></canvas>
    </div>

    <div class="card">
      <h2>Sales by Car Model</h2>
      <canvas id="modelBar"></canvas>
    </div>
  </div>

  <footer>
    Â© 2025 BMW Sales Dashboard | Powered by Chart.js
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Example dataset (replace with your real dataset)
    const dataset = [
      { year: 2020, sales: 500, region: "North", color: "Black", engine: "2.0L", fuel: "Petrol", transmission: "Automatic", model: "X1" },
      { year: 2020, sales: 700, region: "South", color: "White", engine: "3.0L", fuel: "Diesel", transmission: "Manual", model: "X3" },
      { year: 2021, sales: 900, region: "East", color: "Red", engine: "2.0L", fuel: "Petrol", transmission: "Automatic", model: "X5" },
      { year: 2021, sales: 600, region: "West", color: "Blue", engine: "4.4L", fuel: "Hybrid", transmission: "Automatic", model: "M3" },
      { year: 2022, sales: 1200, region: "North", color: "Black", engine: "3.0L", fuel: "Electric", transmission: "Automatic", model: "M5" },
    ];

    // Extract available years
    const years = [...new Set(dataset.map(d => d.year))].sort((a, b) => a - b);

    // Populate filter
    const yearFilter = document.getElementById("yearFilter");
    years.forEach(y => {
      const option = document.createElement("option");
      option.value = y;
      option.textContent = y;
      yearFilter.appendChild(option);
    });

    // Chart references
    let charts = {};

    function updateCharts(selectedYear) {
      const data = dataset.filter(d => d.year == selectedYear);

      // Sales Trend (across all years, static)
      const salesByYear = years.map(y => dataset.filter(d => d.year == y).reduce((sum, r) => sum + r.sales, 0));
      charts.salesTrend.data.labels = years;
      charts.salesTrend.data.datasets[0].data = salesByYear;
      charts.salesTrend.update();

      // Region Donut
      const regions = [...new Set(data.map(d => d.region))];
      const regionValues = regions.map(r => data.filter(d => d.region == r).reduce((s, r2) => s + r2.sales, 0));
      charts.regionDonut.data.labels = regions;
      charts.regionDonut.data.datasets[0].data = regionValues;
      charts.regionDonut.update();

      // Color Donut
      const colors = [...new Set(data.map(d => d.color))];
      const colorValues = colors.map(c => data.filter(d => d.color == c).reduce((s, r2) => s + r2.sales, 0));
      charts.colorDonut.data.labels = colors;
      charts.colorDonut.data.datasets[0].data = colorValues;
      charts.colorDonut.data.datasets[0].backgroundColor = colors.map(c => c.toLowerCase());
      charts.colorDonut.update();

      // Engine Bar
      const engines = [...new Set(data.map(d => d.engine))];
      const engineValues = engines.map(e => data.filter(d => d.engine == e).reduce((s, r2) => s + r2.sales, 0));
      charts.engineBar.data.labels = engines;
      charts.engineBar.data.datasets[0].data = engineValues;
      charts.engineBar.update();

      // Fuel Pie
      const fuels = [...new Set(data.map(d => d.fuel))];
      const fuelValues = fuels.map(f => data.filter(d => d.fuel == f).reduce((s, r2) => s + r2.sales, 0));
      charts.fuelPie.data.labels = fuels;
      charts.fuelPie.data.datasets[0].data = fuelValues;
      charts.fuelPie.update();

      // Transmission Pie
      const transmissions = [...new Set(data.map(d => d.transmission))];
      const transValues = transmissions.map(t => data.filter(d => d.transmission == t).reduce((s, r2) => s + r2.sales, 0));
      charts.transmissionPie.data.labels = transmissions;
      charts.transmissionPie.data.datasets[0].data = transValues;
      charts.transmissionPie.update();

      // Model Bar
      const models = [...new Set(data.map(d => d.model))];
      const modelValues = models.map(m => data.filter(d => d.model == m).reduce((s, r2) => s + r2.sales, 0));
      charts.modelBar.data.labels = models;
      charts.modelBar.data.datasets[0].data = modelValues;
      charts.modelBar.update();
    }

    // Init charts
    function initCharts() {
      const chartFont = {
        family: 'Geist',
        size: 13,
        weight: '500'
      };

      charts.salesTrend = new Chart(document.getElementById("salesTrend"), {
        type: "line",
        data: { labels: [], datasets: [{ label: "Sales", data: [], borderColor: "#00aaff", backgroundColor: "rgba(0,170,255,0.3)", fill: true, tension: 0.3 }] },
        options: { plugins: { legend: { labels: { font: chartFont, color: "#fff" } } }, scales: { x: { ticks: { color: "#fff", font: chartFont } }, y: { ticks: { color: "#fff", font: chartFont } } } }
      });

      charts.regionDonut = new Chart(document.getElementById("regionDonut"), {
        type: "doughnut",
        data: { labels: [], datasets: [{ data: [], backgroundColor: ["#007aff","#34c759","#ffcc00","#ff3b30"] }] },
        options: { plugins: { legend: { labels: { font: chartFont, color: "#fff" } } } }
      });

      charts.colorDonut = new Chart(document.getElementById("colorDonut"), {
        type: "doughnut",
        data: { labels: [], datasets: [{ data: [], backgroundColor: [] }] },
        options: { plugins: { legend: { labels: { font: chartFont, color: "#fff" } } } }
      });

      charts.engineBar = new Chart(document.getElementById("engineBar"), {
        type: "bar",
        data: { labels: [], datasets: [{ label: "Sales", data: [], backgroundColor: "#9d4edd" }] },
        options: { plugins: { legend: { labels: { font: chartFont, color: "#fff" } } }, scales: { x: { ticks: { color: "#fff", font: chartFont } }, y: { ticks: { color: "#fff", font: chartFont } } } }
      });

      charts.fuelPie = new Chart(document.getElementById("fuelPie"), {
        type: "pie",
        data: { labels: [], datasets: [{ data: [], backgroundColor: ["#ff6b6b","#1dd1a1","#54a0ff","#feca57"] }] },
        options: { plugins: { legend: { labels: { font: chartFont, color: "#fff" } } } }
      });

      charts.transmissionPie = new Chart(document.getElementById("transmissionPie"), {
        type: "pie",
        data: { labels: [], datasets: [{ data: [], backgroundColor: ["#ff9f43","#10ac84"] }] },
        options: { plugins: { legend: { labels: { font: chartFont, color: "#fff" } } } }
      });

      charts.modelBar = new Chart(document.getElementById("modelBar"), {
        type: "bar",
        data: { labels: [], datasets: [{ label: "Sales", data: [], backgroundColor: "#5f27cd" }] },
        options: { indexAxis: 'x', plugins: { legend: { labels: { font: chartFont, color: "#fff" } } }, scales: { x: { ticks: { color: "#fff", font: chartFont, maxRotation: 90, minRotation: 90 } }, y: { ticks: { color: "#fff", font: chartFont } } } }
      });
    }

    initCharts();
    updateCharts(years[0]);

    // Handle filter change
    yearFilter.addEventListener("change", (e) => {
      updateCharts(e.target.value);
    });
  </script>
</body>
</html>
